<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Sissymax</title>
<link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon">

<!-- Blueimp Gallery -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/blueimp-gallery/2.29.0/css/blueimp-gallery.min.css">

<!-- Bootstrap -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">

<!-- Estilos -->
<link rel="stylesheet" href="styles.css">

<!-- JS libs -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-gallery/2.29.0/js/blueimp-gallery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.0.7/howler.min.js"></script>
</head>

<body>

<div class="container-fluid text-center">
  <!-- BANNER -->
  <div id="banner">
    <img src="assets/logo.png" id="banner-logo" alt="Logo" style="height:48px;">
    <h1 id="banner-title">Sissymax</h1>
  </div>

  <!-- FORMULARIO AJUSTES -->
  <div id="settings">
    <form autocomplete="off">
      <!-- Subir carpeta -->
      <label class="btn btn-primary" for="folder-input">Subir carpeta</label>
      <input type="file" id="folder-input" webkitdirectory multiple>
      <span id="file-count">0 archivos cargados</span>

      <!-- BPM -->
      <input class="form-control" id="beats-input" type="number" placeholder="BPM">

      <!-- Golpes por imagen -->
      <input class="form-control" id="next-input" type="number" placeholder="Golpes por imagen">

      <!-- Mantra -->
      <textarea class="form-control" id="mantra-input" rows="3" placeholder="Escribe tu mantra"></textarea>

      <!-- Iniciar -->
      <button id="start-button" type="button" class="btn btn-primary">Iniciar</button>
    </form>
  </div>
</div>

<!-- MANTRA DISPLAY -->
<div id="mantra-display"></div>

<!-- GALERÃA -->
<div id="blueimp-gallery" class="blueimp-gallery blueimp-gallery-controls">
  <div class="slides"></div>
  <a class="prev">â€¹</a>
  <a class="next">â€º</a>
  <a class="close">Ã—</a>
  <ol class="indicator"></ol>
</div>

<!-- FOOTER -->
<footer id="footer" class="text-center" style="margin-top:40px; padding-bottom:40px;">
  <h5>Enlaces</h5>
  <p>
    <a href="#" id="open-guide" style="color:#bb86fc; text-decoration:underline; font-weight:bold;">ðŸ“– GuÃ­a de Uso</a>
    &nbsp;|&nbsp;
    <a href="#" id="open-privacy" style="color:#bb86fc; text-decoration:underline; font-weight:bold;">ðŸ”’ PolÃ­tica de Privacidad</a>
  </p>
</footer>

<!-- MODAL -->
<div id="guide-modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.85); z-index:10000; padding:10px;">
  <div id="guide-content" style="background:#1e1e1e; color:#e0e0e0; max-width:95%; margin:5vh auto; padding:20px; border-radius:12px; overflow-y:auto; position:relative; text-align:left; font-size:16px; height:90vh;">
    <!-- Cerrar superior -->
    <span id="close-guide" style="position:absolute; top:10px; right:15px; font-size:28px; font-weight:bold; cursor:pointer; color:#bb86fc;">&times;</span>
    <!-- Contenido dinÃ¡mico -->
    <div id="modal-inner-content"></div>
    <!-- Cerrar inferior -->
    <div style="text-align:center; margin-top:30px;">
      <button id="close-guide-btn" class="btn" style="background:#bb86fc; color:#121212; padding:12px 24px; border-radius:8px; font-size:16px;">Cerrar</button>
    </div>
  </div>
</div>

<!-- JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="script.js"></script>

<script>
  const modal = document.getElementById('guide-modal');
  const openGuide = document.getElementById('open-guide');
  const openPrivacy = document.getElementById('open-privacy');
  const closeTop = document.getElementById('close-guide');
  const closeBottom = document.getElementById('close-guide-btn');
  const inner = document.getElementById('modal-inner-content');

  function openModal(url){
    modal.style.display='block';
    document.body.style.overflow='hidden';
    inner.innerHTML='<p>Cargandoâ€¦</p>';
    fetch(url)
      .then(r=>r.text())
      .then(html=>{ inner.innerHTML=html; })
      .catch(()=>{ inner.innerHTML='<p>Error al cargar el contenido.</p>'; });
  }

  function closeModal(){
    modal.style.display='none';
    document.body.style.overflow='';
    inner.innerHTML='';
  }

  openGuide.addEventListener('click', e=>{ e.preventDefault(); openModal('documents/guia.html'); });
  openPrivacy.addEventListener('click', e=>{ e.preventDefault(); openModal('documents/privacy.html'); });
  closeTop.addEventListener('click', closeModal);
  closeBottom.addEventListener('click', closeModal);

  window.addEventListener('click', e=>{ if(e.target===modal) closeModal(); });
</script>

</body>
</html>
